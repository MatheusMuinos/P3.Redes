# Modificaciones para enviar/recibir array de floats

Objetivo
- Modificar emisor y receptor para transmitir un array de floats en un único datagrama UDP.
- El número de datos (count) se especifica solo en el emisor; el receptor debe determinarlo leyendo el datagrama recibido.

Cambios principales en el código
1) emisor.c
- Nuevo uso:
  emisor <puerto_local> <ip_destino> <puerto_destino> <num_floats>
- El emisor construye un único datagrama con formato:
  [uint32_t count (network byte order)] [float0] [float1] ...
  Para evitar problemas de endianess se reinterpreta cada float como uint32_t y se aplica htonl sobre esa representación antes de copiarla al buffer.
- Se comprueba que el tamaño total del paquete no exceda el máximo seguro de payload UDP (65507 bytes).

2) receptor.c
- El receptor mantiene el uso:
  receptor <puerto>
- Lee un datagrama completo (recvfrom) a un buffer grande.
- Extrae los primeros 4 bytes para obtener count (ntohl).
- Calcula cuántos floats llegaron realmente: (bytes_recibidos - 4) / 4.
- Si el número de floats recibidos es menor que el count declarado, se imprime una advertencia (datagrama truncado).
- Convierte cada uint32_t de network order a host order y luego lo interpreta como float para mostrar su valor.

Resultado obtenido / observaciones
- El receptor puede determinar el número esperado de valores leyendo el campo count enviado por el emisor.
- Si el datagrama se truncó (por buffer pequeño o por tamaño del datagrama mayor que MTU), el receptor detectará que han llegado menos floats de los declarados.
- Es responsabilidad del emisor asegurarse de que el datagrama quepa en la red (o fragmentarlo a nivel de la aplicación enviando múltiples datagramas con índices).
- Las conversiones usan htonl/ntohl sobre la representación binaria de cada float para mantener coherencia entre arquitecturas con distinto endianness.

Cómo probar
1. Compilar:
   gcc -o receptor c:\Users\mathe\Downloads\P3.Redes\receptor.c
   gcc -o emisor c:\Users\mathe\Downloads\P3.Redes\emisor.c

2. Ejecutar receptor:
   ./receptor 12345

3. Ejecutar emisor (envía p. ej. 10 floats):
   ./emisor 50000 127.0.0.1 12345 10

Salida esperada (ejemplo):
- Emisor: "44 bytes enviados (count=10)"
- Receptor: mostrará count declarado, floats disponibles y los valores 1.0, 2.0, ... etc.

Notas
- El formato usado (count + binario float) permite al receptor conocer el número de datos sin configuración adicional.
- Si quieres enviar floats en formato textual (por ejemplo CSV) se podría parsear en el receptor, pero el método binario es más eficiente y directo.